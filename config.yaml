name: "Hexesoft-BTicino"
description: "Bridge MQTT professionale per domotica Bticino SCS"
version: "1.0.0"
slug: "hexesoft_bticino"
arch:
  - aarch64
  - amd64
  - armv7
host_network: true
startup: application
boot: auto

# 1. OPZIONI DI DEFAULT
options:
  Bticino:
    host: "192.168.1.35"
    port: 20000
    password: "12345"
    logunknowndevices: true
  
  ScanSettings:
    skiplight: false
    skipshutter: false
    skipthermostat: false
    disableenergymonitor: false
    energypollingintervalseconds: 60
  
  # Questo creer√† un'unica grande sezione "Devices" espandibile nell'interfaccia UI
  Devices:
    BinarySensors: []
    Buttons: []
    EnergyMeters: []
    Lights: []
    Relays: []
    Shutters: []
    Switches: []
    Thermostats: []
  
  Mqtt:
    host: "core-mosquitto"
    port: 1883
    username: ""
    password: ""
    base_topic: "bticino_bridge"
    discovery_prefix: "homeassistant"

# 2. DEFINIZIONE DEI CAMPI E GRUPPI UI
schema:
  # --- 1. GRUPPO: BTICINO ---
  Bticino:
    host: str
    port: int
    password: password
    LogUnknownDevices: bool
  
  # --- 2. GRUPPO: SCANSIONE ---
  ScanSettings:
    skiplight: bool
    skipshutter: bool
    skipthermostat: bool
    disableenergymonitor: bool
    energypollingintervalseconds: int(30, 3600) # Minimo 30 secondi, massimo 1 ora
  
  # --- 3. GRUPPO: DISPOSITIVI (Contenitore per le liste) ---
  Devices:
    BinarySensors:
      - name: str
        bus: int(0, 15)
        a: int(0, 15)
        pl: int(0, 15)
        invert: bool
        device_class: list(none|door|window|motion|smoke|moisture|opening|presence)
        model: str?
    
    Buttons:
      - name: str
        bus: int(0, 15)
        a: int(0, 15)
        pl: int(0, 15)
        model: str?
    
    EnergyMeters:
      - name: str
        bus: int(0, 15)
        id: int
        model: str?
    
    Lights:
      - name: str
        bus: int(0, 15)
        a: int(0, 15)
        pl: int(0, 15)
        timer: list(none|0.5s|2s|30s|1m|2m|3m|4m|5m|10m|15m)
        model: str?
    
    Relays:
      - name: str
        bus: int
        id: int
        invert: bool?
        model: str?
    
    Shutters:
      - name: str
        bus: int(0, 15)
        a: int(0, 15)
        pl: int(0, 15)
        model: str?
    
    Switches:
      - name: str
        bus: int(0, 15)
        a: int(0, 15)
        pl: int(0, 15)
        timer: list(none|0.5s|2s|30s|1m|2m|3m|4m|5m|10m|15m)
        model: str?
    
    Thermostats:
      - name: str
        zone: int(0, 99)
        canHeat: bool
        canCool: bool
        manageFan: bool
        model: str?
      
  # --- 4. GRUPPO: MQTT ---
  Mqtt:
    host: str
    port: int
    username: str?
    password: password?
    base_topic: str
    discovery_prefix: strbox